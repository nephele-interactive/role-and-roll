<form class="{{cssClass}}" autocomplete="off">

  <!-- HEADER -->
  <header class="sheet-header">
    <img class="profile-img"
         src="{{actor.img}}"
         data-edit="img"
         title="{{actor.name}}"
         height="100"
         width="100"/>

    <div class="header-fields">
      <h1 class="charname">
        <input name="name" type="text" value="{{actor.name}}" placeholder="Character Name"/>
      </h1>

      <div class="resources">
        <div class="resource">
          <label>Health</label>
          <input type="number" name="system.health.value" value="{{system.health.value}}" />
          <span>/</span>
          <input type="number" name="system.health.max" value="{{system.health.max}}" />
        </div>

        <div class="resource">
          <label>Mental</label>
          <input type="number" name="system.mental.value" value="{{system.mental.value}}" />
          <span>/</span>
          <input type="number" name="system.mental.max" value="{{system.mental.max}}" />
        </div>

        <div class="resource">
          <label>Level</label>
          <input type="number" name="system.level" value="{{system.level}}" />
        </div>

        <div class="resource">
          <label>EXP</label>
          <input type="number" name="system.exp" value="{{system.exp}}" />
        </div>

        <div class="resource">
          <label>Will Power</label>
          <input type="number" name="system.wp" value="{{system.wp}}" />
        </div>

        <div class="resource">
          <label>Defense</label>
          <input type="number" name="system.defense" value="{{system.defense}}" />
        </div>
      </div>
    </div>
  </header>

  <!-- TABS -->
  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="attributes">Attributes</a>
    <a class="item" data-tab="abilities">Abilities</a>
    <a class="item" data-tab="skills">Skills</a>
    <a class="item" data-tab="equipment">Equipment</a>
    <a class="item" data-tab="biography">Biography</a>
  </nav>

  <section class="sheet-body">

    <!-- ATTRIBUTES -->
    <div class="tab attributes" data-group="primary" data-tab="attributes">

      {{#each system.attributes as |attr key|}}
      <div class="attribute">
        <label class="attr-label">{{capitalize key}}</label>

        <div class="dice-pool">
          <button type="button" class="dice-control"
                  data-action="decrease"
                  data-target="attributes.{{key}}.dice">−</button>

          <div class="dice-display">
            {{#each (range 1 6) as |i|}}
              <span class="die {{#if (lte i attr.dice)}}filled{{/if}}">●</span>
            {{/each}}
          </div>

          <button type="button" class="dice-control"
                  data-action="increase"
                  data-target="attributes.{{key}}.dice">+</button>
        </div>

        <input type="checkbox"
               name="system.attributes.{{key}}.succeed"
               {{checked attr.succeed}}
               title="Succeed"/>

        <button type="button"
                class="attribute-roll"
                data-attribute="{{key}}">
          <i class="fas fa-dice-d6"></i>
        </button>
      </div>
      {{/each}}

    </div>

    <!-- ABILITIES -->
    <div class="tab abilities" data-group="primary" data-tab="abilities">

      {{#each system.abilities as |group cat|}}
      <h3>{{capitalize cat}}</h3>

      {{#each group as |ability key|}}
      <div class="ability">
        <label class="ability-label">{{capitalize key}}</label>

        <div class="dice-pool">
          <button type="button" class="dice-control"
                  data-action="decrease"
                  data-target="abilities.{{cat}}.{{key}}.dice">−</button>

          <div class="dice-display">
            {{#each (range 1 6) as |i|}}
              <span class="die {{#if (lte i ability.dice)}}filled{{/if}}">●</span>
            {{/each}}
          </div>

          <button type="button" class="dice-control"
                  data-action="increase"
                  data-target="abilities.{{cat}}.{{key}}.dice">+</button>
        </div>

        <input type="checkbox"
               name="system.abilities.{{cat}}.{{key}}.succeed"
               {{checked ability.succeed}}
               title="Succeed"/>

        <button type="button"
                class="ability-roll"
                data-category="{{cat}}"
                data-ability="{{key}}">
          <i class="fas fa-dice-d6"></i>
        </button>
      </div>
      {{/each}}

      {{/each}}

    </div>

    <!-- SKILLS -->
    <div class="tab skills" data-group="primary" data-tab="skills">

      <div class="items-header">
        <span class="header-title">Skills</span>
        <a class="item-control item-create" data-type="skill" title="Add Skill">
          <i class="fas fa-plus"></i> Add Skill
        </a>
      </div>

      <ol class="items-list">
        {{#each skills as |skill idx|}}
        <li class="item skill-item">
          <div class="skill-content">
            <input type="text"
                   class="skill-name"
                   name="system.skills.{{idx}}.name"
                   value="{{skill.name}}"
                   placeholder="Skill name"/>

            <textarea class="skill-description"
                      name="system.skills.{{idx}}.description"
                      placeholder="Description">{{skill.description}}</textarea>
          </div>

          <a class="item-control item-delete" data-index="{{idx}}" title="Delete">
            <i class="fas fa-trash"></i>
          </a>
        </li>
        {{/each}}
      </ol>

    </div>

    <!-- EQUIPMENT -->
    <div class="tab equipment" data-group="primary" data-tab="equipment">

      <div class="items-header">
        <span class="header-title">Equipment</span>
        <a class="item-control item-create" data-type="item" title="Add Item">
          <i class="fas fa-plus"></i> Add Item
        </a>
      </div>

      <ol class="items-list">
        {{#each items as |item id|}}
        <li class="item equipment-item" data-item-id="{{item._id}}">
          <img src="{{item.img}}" class="item-img" width="36" height="36" title="{{item.name}}"/>
          
          <div class="item-details">
            <h4 class="item-name">{{item.name}}</h4>
            <span class="item-type">{{item.type}}</span>
          </div>

          <div class="item-controls">
            <a class="item-control item-edit" title="Edit">
              <i class="fas fa-edit"></i>
            </a>
            <a class="item-control item-delete" title="Delete">
              <i class="fas fa-trash"></i>
            </a>
          </div>
        </li>
        {{/each}}
      </ol>

    </div>

    <!-- BIOGRAPHY -->
    <div class="tab biography" data-group="primary" data-tab="biography">
      
      <div class="bio-group">
        <label>Bio</label>
        <textarea name="system.bio" rows="4">{{system.bio}}</textarea>
      </div>

      <div class="bio-group">
        <label>Source of Will Power</label>
        <textarea name="system.sourceOfWillPower" rows="2">{{system.sourceOfWillPower}}</textarea>
      </div>

      <div class="bio-group">
        <label>Buff</label>
        <textarea name="system.buff" rows="3">{{system.buff}}</textarea>
      </div>

      <div class="bio-group">
        <label>Debuff</label>
        <textarea name="system.debuff" rows="3">{{system.debuff}}</textarea>
      </div>

      <div class="bio-group">
        <label>Injuries and Disorders</label>
        <textarea name="system.injuries" rows="2">{{system.injuries}}</textarea>
      </div>

      <div class="bio-group">
        <label>Flaws</label>
        <textarea name="system.flaw" rows="2">{{system.flaw}}</textarea>
      </div>

      <div class="bio-group">
        <label>Psychiatric Disorder</label>
        <textarea name="system.psychiatricDisorder" rows="2">{{system.psychiatricDisorder}}</textarea>
      </div>

    </div>

  </section>
</form>